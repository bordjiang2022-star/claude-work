# å®¢æˆ·ä½“éªŒåŒ…æ–¹æ¡ˆ - å®Œæ•´å¯¹æ¯”åˆ†æ

## é—®é¢˜èƒŒæ™¯

**æ ¸å¿ƒçŸ›ç›¾:**
- DASHSCOPE_API_KEY æ˜¯æ‚¨çš„ä»˜è´¹è´¦å·å¯†é’¥
- ç›´æ¥æ‰“åŒ…åˆ°Dockeré•œåƒä¸­ä¼šè¢«è¯•ç”¨å®¢æˆ·è·å–
- å®¢æˆ·å¯èƒ½æ»¥ç”¨å¯†é’¥å¯¼è‡´è´¹ç”¨å¤±æ§

---

## æ–¹æ¡ˆå¯¹æ¯”è¡¨

| æ–¹æ¡ˆ | å®‰å…¨æ€§ | æˆæœ¬æ§åˆ¶ | å®æ–½éš¾åº¦ | ç”¨æˆ·ä½“éªŒ | é€‚ç”¨åœºæ™¯ |
|------|--------|----------|----------|----------|----------|
| **æ–¹æ¡ˆ1: ä»£ç†æœåŠ¡å™¨** | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­ | â­â­â­â­ | **æ¨è** - å¹³è¡¡æœ€ä½³ |
| **æ–¹æ¡ˆ2: ä¸´æ—¶å­è´¦å·** | â­â­â­â­ | â­â­â­â­ | â­â­â­â­ | â­â­â­â­â­ | é˜¿é‡Œäº‘æ”¯æŒRAMçš„æƒ…å†µ |
| **æ–¹æ¡ˆ3: LicenseæœåŠ¡å™¨** | â­â­â­â­ | â­â­â­â­ | â­â­â­ | â­â­â­â­â­ | å¸Œæœ›å®¢æˆ·å®Œå…¨æœ¬åœ°éƒ¨ç½² |
| **æ–¹æ¡ˆ4: çº¯SaaS** | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­ | ä¸æƒ³äº¤ä»˜å®¹å™¨ |
| **æ–¹æ¡ˆ5: é¢„ä»˜è´¹Token** | â­â­â­ | â­â­â­ | â­â­ | â­â­â­â­ | å¿«é€ŸåŸå‹éªŒè¯ |

---

## æ–¹æ¡ˆ1: ä»£ç†æœåŠ¡å™¨æ¶æ„ â­ æ¨è

### å·¥ä½œåŸç†
```
å®¢æˆ·Dockerå®¹å™¨ â†’ æ‚¨çš„äº‘æœåŠ¡å™¨(å«å¯†é’¥) â†’ é˜¿é‡Œäº‘API
```

### è¯¦ç»†è¯´æ˜
è§æ–‡æ¡£: `å®¢æˆ·ä½“éªŒåŒ…æ–¹æ¡ˆ-ä»£ç†æ¶æ„.md`

### ä¼˜ç‚¹
- âœ… APIå¯†é’¥å®Œå…¨éš”ç¦»ï¼Œ100%å®‰å…¨
- âœ… å®æ—¶é…é¢æ§åˆ¶ï¼ˆæ—¶é•¿/æ¬¡æ•°/å¹¶å‘ï¼‰
- âœ… å¯è¿œç¨‹ç¦ç”¨/åŠé”€License
- âœ… å®¢æˆ·æœ¬åœ°éƒ¨ç½²æ„Ÿï¼ˆå‰ç«¯+è½»é‡åç«¯ï¼‰
- âœ… çµæ´»çš„è¯•ç”¨ç­–ç•¥

### ç¼ºç‚¹
- âŒ éœ€è¦ç»´æŠ¤ä¸€ä¸ªä¸­å¿ƒæœåŠ¡å™¨
- âŒ æœåŠ¡å™¨æˆæœ¬: ~$10-20/æœˆ
- âŒ éœ€è¦å¤„ç†æœåŠ¡å™¨ç¨³å®šæ€§/ç›‘æ§

### æˆæœ¬ä¼°ç®—
- **å¼€å‘æˆæœ¬**: 2-3å‘¨å¼€å‘æ—¶é—´
- **æœåŠ¡å™¨æˆæœ¬**: $15/æœˆ (DigitalOcean 2æ ¸4G)
- **æµé‡æˆæœ¬**: WebSocketè½¬å‘ï¼Œçº¦$0.01/GB
- **æ€»æˆæœ¬**: ~$20/æœˆ (æ”¯æŒ50+å¹¶å‘è¯•ç”¨å®¢æˆ·)

### é€‚ç”¨æ¡ä»¶
- âœ… é¢„æœŸè¯•ç”¨å®¢æˆ·æ•°é‡: 10-100+
- âœ… å¸Œæœ›ç²¾ç¡®æ§åˆ¶æˆæœ¬
- âœ… éœ€è¦æ•°æ®åˆ†æï¼ˆä½¿ç”¨ç»Ÿè®¡ï¼‰
- âœ… æœ‰åŸºç¡€çš„è¿ç»´èƒ½åŠ›

---

## æ–¹æ¡ˆ2: é˜¿é‡Œäº‘RAMä¸´æ—¶å­è´¦å·

### å·¥ä½œåŸç†
```
ä¸ºæ¯ä¸ªè¯•ç”¨å®¢æˆ·åˆ›å»ºä¸´æ—¶RAMå­è´¦å· â†’ è®¾ç½®èµ„æºé…é¢ â†’ è‡ªåŠ¨è¿‡æœŸ
```

### æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®¢æˆ·Dockerå®¹å™¨  â”‚
â”‚ â”œâ”€ å‰ç«¯        â”‚
â”‚ â”œâ”€ å®Œæ•´åç«¯    â”‚
â”‚ â””â”€ ä¸´æ—¶APIå¯†é’¥ â”‚  â† æ‚¨é€šè¿‡RAMåˆ›å»ºçš„ä¸´æ—¶å­è´¦å·å¯†é’¥
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ ç›´æ¥è°ƒç”¨
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¿é‡Œäº‘ DashScope API   â”‚
â”‚ â”œâ”€ RAMç­–ç•¥é™åˆ¶:        â”‚
â”‚ â”‚  - æœ€å¤§è°ƒç”¨æ¬¡æ•°      â”‚
â”‚ â”‚  - IPç™½åå•          â”‚
â”‚ â”‚  - æ—¶é—´çª—å£é™åˆ¶      â”‚
â”‚ â””â”€ è‡ªåŠ¨è¿‡æœŸ            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å®æ–½æ­¥éª¤

#### 2.1 åˆ›å»ºRAMç­–ç•¥æ¨¡æ¿

**é˜¿é‡Œäº‘æ§åˆ¶å°æ“ä½œ:**
```json
{
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "dashscope:InvokeModel"
      ],
      "Resource": "*",
      "Condition": {
        "DateLessThan": {
          "acs:CurrentTime": "2025-12-09T00:00:00Z"
        },
        "IpAddress": {
          "acs:SourceIp": [
            "å®¢æˆ·IPæ®µ"
          ]
        }
      }
    }
  ],
  "Version": "1"
}
```

#### 2.2 è‡ªåŠ¨åŒ–è„šæœ¬

**create_trial_account.py**:
```python
"""
è‡ªåŠ¨åˆ›å»ºè¯•ç”¨RAMå­è´¦å·
éœ€è¦å®‰è£…: pip install aliyun-python-sdk-ram
"""
from aliyunsdkcore.client import AcsClient
from aliyunsdkram.request.v20150501 import (
    CreateUserRequest,
    CreateAccessKeyRequest,
    AttachPolicyToUserRequest
)
from datetime import datetime, timedelta
import json

class TrialAccountManager:
    def __init__(self, access_key_id, access_key_secret):
        self.client = AcsClient(
            access_key_id,
            access_key_secret,
            'cn-hangzhou'
        )

    def create_trial_user(
        self,
        customer_email: str,
        trial_days: int = 7,
        max_api_calls: int = 1000
    ):
        """åˆ›å»ºè¯•ç”¨RAMç”¨æˆ·"""

        # 1. åˆ›å»ºRAMç”¨æˆ·
        user_name = f"trial_{customer_email.replace('@', '_')}_{int(datetime.now().timestamp())}"

        create_user_req = CreateUserRequest.CreateUserRequest()
        create_user_req.set_UserName(user_name)
        create_user_req.set_DisplayName(f"Trial User - {customer_email}")
        create_user_req.set_Comments(f"Trial expires: {datetime.now() + timedelta(days=trial_days)}")

        user_response = self.client.do_action_with_exception(create_user_req)

        # 2. åˆ›å»ºAccessKey
        create_key_req = CreateAccessKeyRequest.CreateAccessKeyRequest()
        create_key_req.set_UserName(user_name)

        key_response = self.client.do_action_with_exception(create_key_req)
        key_data = json.loads(key_response)

        access_key_id = key_data['AccessKey']['AccessKeyId']
        access_key_secret = key_data['AccessKey']['AccessKeySecret']

        # 3. é™„åŠ ç­–ç•¥ï¼ˆé™åˆ¶é…é¢ï¼‰
        policy_name = "TrialDashScopePolicy"
        attach_policy_req = AttachPolicyToUserRequest.AttachPolicyToUserRequest()
        attach_policy_req.set_PolicyType("Custom")
        attach_policy_req.set_PolicyName(policy_name)
        attach_policy_req.set_UserName(user_name)

        self.client.do_action_with_exception(attach_policy_req)

        # 4. è®¾ç½®å®šæ—¶åˆ é™¤ï¼ˆä½¿ç”¨äº‘å‡½æ•°ï¼‰
        self._schedule_deletion(user_name, trial_days)

        return {
            "user_name": user_name,
            "access_key_id": access_key_id,
            "access_key_secret": access_key_secret,
            "expires_at": (datetime.now() + timedelta(days=trial_days)).isoformat(),
            "max_api_calls": max_api_calls
        }

    def _schedule_deletion(self, user_name: str, days: int):
        """ä½¿ç”¨é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—å®šæ—¶åˆ é™¤ç”¨æˆ·"""
        # å®ç°ç•¥ - åˆ›å»ºå®šæ—¶è§¦å‘å™¨åˆ é™¤RAMç”¨æˆ·
        pass
```

**ä½¿ç”¨ç¤ºä¾‹:**
```python
# ä¸ºå®¢æˆ·åˆ›å»ºè¯•ç”¨è´¦å·
manager = TrialAccountManager(
    access_key_id="æ‚¨çš„ä¸»è´¦å·AK",
    access_key_secret="æ‚¨çš„ä¸»è´¦å·SK"
)

trial_account = manager.create_trial_user(
    customer_email="customer@example.com",
    trial_days=7,
    max_api_calls=1000
)

print(f"è¯•ç”¨å¯†é’¥: {trial_account['access_key_secret']}")
# å°†å¯†é’¥å‘é€ç»™å®¢æˆ·
```

#### 2.3 å®¢æˆ·ç«¯é…ç½®

**å®¢æˆ·çš„ .env æ–‡ä»¶:**
```bash
# æ‚¨æä¾›çš„ä¸´æ—¶å¯†é’¥
DASHSCOPE_API_KEY=sk-trial-xxxxx  # 7å¤©åè‡ªåŠ¨å¤±æ•ˆ
```

### ä¼˜ç‚¹
- âœ… å®¢æˆ·å¯ä»¥å®Œå…¨æœ¬åœ°è¿è¡Œï¼ˆæ— éœ€è¿æ¥æ‚¨çš„æœåŠ¡å™¨ï¼‰
- âœ… é˜¿é‡Œäº‘åŸç”Ÿçš„å®‰å…¨æœºåˆ¶
- âœ… è‡ªåŠ¨è¿‡æœŸï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç†
- âœ… å¯è®¾ç½®IPç™½åå•ã€è°ƒç”¨æ¬¡æ•°ç­‰é™åˆ¶

### ç¼ºç‚¹
- âŒ RAMè´¦å·ç®¡ç†å¤æ‚
- âŒ éš¾ä»¥ç²¾ç¡®æ§åˆ¶ä½¿ç”¨æ—¶é•¿ï¼ˆæŒ‰è°ƒç”¨æ¬¡æ•°ï¼‰
- âŒ å¯èƒ½äº§ç”Ÿæ„å¤–è´¹ç”¨ï¼ˆå¦‚æœé…é¢è®¾ç½®ä¸å½“ï¼‰
- âŒ å¯†é’¥ä»ç„¶åœ¨å®¢æˆ·æ‰‹ä¸­ï¼ˆç†è®ºä¸Šå¯è¢«æå–ï¼‰

### æˆæœ¬ä¼°ç®—
- **æ— é¢å¤–æœåŠ¡å™¨æˆæœ¬**
- **APIè´¹ç”¨é£é™©**: éœ€è¦ä¸¥æ ¼é…é¢é™åˆ¶
- **ç®¡ç†æˆæœ¬**: éœ€è¦è‡ªåŠ¨åŒ–è„šæœ¬ç®¡ç†RAMè´¦å·

### é€‚ç”¨æ¡ä»¶
- âœ… é˜¿é‡Œäº‘æ”¯æŒRAMå­è´¦å·åŠŸèƒ½
- âœ… å®¢æˆ·æ•°é‡è¾ƒå°‘ï¼ˆ<20ä¸ªï¼‰
- âœ… å®¢æˆ·éœ€è¦å®Œå…¨ç¦»çº¿è¿è¡Œ
- âœ… æœ‰èƒ½åŠ›å¼€å‘RAMç®¡ç†è‡ªåŠ¨åŒ–

---

## æ–¹æ¡ˆ3: LicenseæœåŠ¡å™¨ + åŠ¨æ€å¯†é’¥

### å·¥ä½œåŸç†
```
å®¢æˆ·Dockerå®¹å™¨(å®Œæ•´åç«¯) â†’ LicenseæœåŠ¡å™¨éªŒè¯ â†’ è¿”å›ä¸´æ—¶å¯†é’¥ â†’ è°ƒç”¨é˜¿é‡Œäº‘
```

### æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      å®¢æˆ· Docker å®¹å™¨            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  åç«¯ (å®Œæ•´åŠŸèƒ½)           â”‚  â”‚
â”‚  â”‚  â”œâ”€ ç¿»è¯‘æœåŠ¡              â”‚  â”‚
â”‚  â”‚  â””â”€ License Client        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ 1. éªŒè¯License + è¯·æ±‚ä¸´æ—¶å¯†é’¥
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    æ‚¨çš„ License æœåŠ¡å™¨           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  LicenseéªŒè¯               â”‚ â”‚
â”‚  â”‚  â”œâ”€ æ£€æŸ¥æœ‰æ•ˆæœŸ             â”‚ â”‚
â”‚  â”‚  â”œâ”€ æ£€æŸ¥é…é¢               â”‚ â”‚
â”‚  â”‚  â””â”€ ç”Ÿæˆä¸´æ—¶å¯†é’¥(15åˆ†é’Ÿ)   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚  ä¸´æ—¶å¯†é’¥æ± :                     â”‚
â”‚  â”œâ”€ temp_key_1 (15åˆ†é’Ÿæœ‰æ•ˆ)     â”‚
â”‚  â”œâ”€ temp_key_2 (15åˆ†é’Ÿæœ‰æ•ˆ)     â”‚
â”‚  â””â”€ ...                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ 2. è¿”å›ä¸´æ—¶å¯†é’¥
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      å®¢æˆ· Docker å®¹å™¨            â”‚
â”‚  ä½¿ç”¨ä¸´æ—¶å¯†é’¥è°ƒç”¨é˜¿é‡Œäº‘          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ 3. ç›´æ¥è°ƒç”¨API
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      é˜¿é‡Œäº‘ DashScope API        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæœºåˆ¶

#### 3.1 ä¸´æ—¶å¯†é’¥è½®æ¢

**æ‚¨çš„åšæ³•:**
1. åˆ›å»º10ä¸ªé˜¿é‡Œäº‘å­è´¦å·å¯†é’¥ï¼ˆä½œä¸ºå¯†é’¥æ± ï¼‰
2. LicenseæœåŠ¡å™¨åŠ¨æ€åˆ†é…å¯†é’¥ç»™å®¢æˆ·
3. æ¯ä¸ªå¯†é’¥åªåœ¨å®¢æˆ·ç«¯ç¼“å­˜15åˆ†é’Ÿ
4. è¶…æ—¶åå®¢æˆ·ç«¯å¿…é¡»é‡æ–°éªŒè¯Licenseå¹¶è·å–æ–°å¯†é’¥

**license_server/key_pool.py**:
```python
"""
åŠ¨æ€å¯†é’¥æ± ç®¡ç†
"""
import secrets
from datetime import datetime, timedelta

class DynamicKeyPool:
    def __init__(self):
        # æ‚¨é¢„å…ˆåˆ›å»ºçš„10ä¸ªå­è´¦å·å¯†é’¥
        self.master_keys = [
            "sk-pool-key-001",
            "sk-pool-key-002",
            # ... å…±10ä¸ª
        ]

        self.issued_keys = {}  # license_key -> temp_key_info

    async def issue_temporary_key(
        self,
        license_key: str,
        duration_minutes: int = 15
    ) -> dict:
        """é¢å‘ä¸´æ—¶å¯†é’¥"""

        # æ£€æŸ¥æ˜¯å¦å·²æœ‰æœ‰æ•ˆå¯†é’¥
        if license_key in self.issued_keys:
            existing = self.issued_keys[license_key]
            if existing['expires_at'] > datetime.utcnow():
                return existing  # è¿”å›ç°æœ‰å¯†é’¥

        # ä»æ± ä¸­é€‰æ‹©ä¸€ä¸ªå¯†é’¥ï¼ˆè½®è¯¢æˆ–éšæœºï¼‰
        pool_key = self._select_key_from_pool()

        # åˆ›å»ºä¸´æ—¶åŒ…è£…
        temp_key_info = {
            "temp_key": pool_key,  # å®é™…æ˜¯æ± ä¸­çš„çœŸå®å¯†é’¥
            "issued_at": datetime.utcnow(),
            "expires_at": datetime.utcnow() + timedelta(minutes=duration_minutes),
            "license_key": license_key
        }

        self.issued_keys[license_key] = temp_key_info

        return {
            "api_key": pool_key,
            "expires_in_seconds": duration_minutes * 60,
            "expires_at": temp_key_info['expires_at'].isoformat()
        }

    def _select_key_from_pool(self) -> str:
        """è´Ÿè½½å‡è¡¡é€‰æ‹©å¯†é’¥"""
        # ç®€å•è½®è¯¢æˆ–åŸºäºä½¿ç”¨æ¬¡æ•°é€‰æ‹©
        import random
        return random.choice(self.master_keys)

    async def revoke_key(self, license_key: str):
        """åŠé”€å¯†é’¥"""
        if license_key in self.issued_keys:
            del self.issued_keys[license_key]
```

#### 3.2 å®¢æˆ·ç«¯License Client

**customer-backend/license_client.py**:
```python
"""
å®¢æˆ·ç«¯ - LicenseéªŒè¯å®¢æˆ·ç«¯
"""
import httpx
from datetime import datetime, timedelta

class LicenseClient:
    def __init__(self, license_key: str, server_url: str):
        self.license_key = license_key
        self.server_url = server_url
        self.current_api_key = None
        self.key_expires_at = None

    async def get_api_key(self) -> str:
        """è·å–APIå¯†é’¥ - è‡ªåŠ¨åˆ·æ–°"""

        # æ£€æŸ¥ç°æœ‰å¯†é’¥æ˜¯å¦ä»ç„¶æœ‰æ•ˆ
        if self.current_api_key and self.key_expires_at:
            if datetime.utcnow() < self.key_expires_at - timedelta(minutes=2):
                return self.current_api_key  # æå‰2åˆ†é’Ÿåˆ·æ–°

        # è¯·æ±‚æ–°å¯†é’¥
        async with httpx.AsyncClient() as client:
            response = await client.post(
                f"{self.server_url}/api/license/request-key",
                json={"license_key": self.license_key}
            )

            if response.status_code == 403:
                raise Exception("Licenseæ— æ•ˆæˆ–å·²è¿‡æœŸ")

            data = response.json()
            self.current_api_key = data['api_key']
            self.key_expires_at = datetime.fromisoformat(data['expires_at'])

            return self.current_api_key

# åœ¨ç¿»è¯‘æœåŠ¡ä¸­ä½¿ç”¨
license_client = LicenseClient(
    license_key=os.getenv("LICENSE_KEY"),
    server_url="https://license.yourdomain.com"
)

# æ¯æ¬¡ç¿»è¯‘å‰è·å–å¯†é’¥
api_key = await license_client.get_api_key()
client = LiveTranslateClient(api_key=api_key, ...)
```

### ä¼˜ç‚¹
- âœ… å®¢æˆ·å¯ä»¥æœ¬åœ°è¿è¡Œå®Œæ•´åç«¯
- âœ… å¯†é’¥å®šæœŸè½®æ¢ï¼Œé™ä½æ³„éœ²é£é™©
- âœ… LicenseæœåŠ¡å™¨å¯è¿œç¨‹ç¦ç”¨
- âœ… è¾ƒå¥½çš„ç”¨æˆ·ä½“éªŒï¼ˆæœ¬åœ°éƒ¨ç½²ï¼‰

### ç¼ºç‚¹
- âŒ å¯†é’¥ä»å¯èƒ½è¢«å®¢æˆ·åœ¨15åˆ†é’Ÿå†…æå–
- âŒ éœ€è¦ç»´æŠ¤LicenseæœåŠ¡å™¨
- âŒ å®¢æˆ·ç«¯éœ€è¦å®šæœŸè”ç½‘éªŒè¯

### é€‚ç”¨æ¡ä»¶
- âœ… å®¢æˆ·å¼ºçƒˆè¦æ±‚æœ¬åœ°åŒ–éƒ¨ç½²
- âœ… å¯æ¥å—å¯†é’¥çŸ­æœŸæš´éœ²é£é™©
- âœ… æœ‰å®šæœŸè”ç½‘éªŒè¯çš„å¯è¡Œæ€§

---

## æ–¹æ¡ˆ4: çº¯SaaSæ¨¡å¼ï¼ˆä¸äº¤ä»˜å®¹å™¨ï¼‰

### å·¥ä½œåŸç†
```
å®¢æˆ·æµè§ˆå™¨ â†’ æ‚¨çš„WebæœåŠ¡å™¨(å‰åç«¯) â†’ é˜¿é‡Œäº‘API
```

### æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å®¢æˆ·æµè§ˆå™¨   â”‚
â”‚  (å‰ç«¯UI)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ HTTPS
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ‚¨çš„ Web æœåŠ¡å™¨          â”‚
â”‚   â”œâ”€ å‰ç«¯ (é™æ€æ‰˜ç®¡)       â”‚
â”‚   â”œâ”€ åç«¯ API             â”‚
â”‚   â”œâ”€ ç”¨æˆ·è®¤è¯ç³»ç»Ÿ          â”‚
â”‚   â”œâ”€ é…é¢ç®¡ç†              â”‚
â”‚   â””â”€ APIå¯†é’¥ (å®‰å…¨å­˜å‚¨)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   é˜¿é‡Œäº‘ DashScope API     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å®æ–½
- éƒ¨ç½²å½“å‰é¡¹ç›®åˆ°äº‘æœåŠ¡å™¨
- å®¢æˆ·è®¿é—® https://demo.yourdomain.com
- æ³¨å†Œè¯•ç”¨è´¦å·ï¼ˆé‚®ç®±éªŒè¯ï¼‰
- è‡ªåŠ¨è·å¾—7å¤©è¯•ç”¨æƒé™

### ä¼˜ç‚¹
- âœ… **æœ€å®‰å…¨**: å¯†é’¥å®Œå…¨ä¸ç¦»å¼€æ‚¨çš„æœåŠ¡å™¨
- âœ… **æœ€ç®€å•**: å®¢æˆ·æ— éœ€å®‰è£…ä»»ä½•ä¸œè¥¿
- âœ… **æ˜“ç®¡ç†**: é›†ä¸­å¼ç®¡ç†æ‰€æœ‰ç”¨æˆ·
- âœ… **æ•°æ®åˆ†æ**: å®Œæ•´çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®

### ç¼ºç‚¹
- âŒ å®¢æˆ·æ— æ³•ç¦»çº¿ä½¿ç”¨
- âŒ éŸ³é¢‘å»¶è¿Ÿï¼ˆç½‘ç»œä¼ è¾“ï¼‰
- âŒ æœåŠ¡å™¨æˆæœ¬è¾ƒé«˜ï¼ˆå¤„ç†éŸ³é¢‘æµï¼‰
- âŒ éœ€è¦å¤„ç†éšç§é—®é¢˜ï¼ˆéŸ³é¢‘æ•°æ®ä¼ è¾“ï¼‰

### æˆæœ¬ä¼°ç®—
- **æœåŠ¡å™¨**: $50-100/æœˆ (4æ ¸8G + éŸ³é¢‘å¤„ç†)
- **æµé‡**: $0.05-0.1/GB (éŸ³é¢‘æµ)
- **æ€»æˆæœ¬**: æ ¹æ®ç”¨æˆ·æ•°çº¿æ€§å¢é•¿

### é€‚ç”¨æ¡ä»¶
- âœ… å®¢æˆ·å¯æ¥å—åœ¨çº¿æœåŠ¡
- âœ… ä¸æ¶‰åŠæ•æ„ŸéŸ³é¢‘æ•°æ®
- âœ… æœ‰å……è¶³çš„é¢„ç®—

---

## æ–¹æ¡ˆ5: é¢„ä»˜è´¹Tokenç³»ç»Ÿï¼ˆç®€åŒ–ç‰ˆï¼‰

### å·¥ä½œåŸç†
```
å®¢æˆ·è´­ä¹°Token â†’ Dockerå®¹å™¨æ¶ˆè€—Token â†’ Tokenè€—å°½åœæ­¢
```

### å®ç°
```python
# å®¢æˆ·çš„.env
TRIAL_TOKEN=100000  # ä»£è¡¨100000ä¸ªå­—ç¬¦çš„ç¿»è¯‘é…é¢

# åç«¯åœ¨æ¯æ¬¡ç¿»è¯‘åæ‰£é™¤
translation_length = len(source_text) + len(translated_text)
remaining_token -= translation_length

if remaining_token <= 0:
    raise Exception("Tokenå·²ç”¨å®Œï¼Œè¯·è”ç³»è´­ä¹°")
```

### ä¼˜ç‚¹
- âœ… å®ç°æç®€å•
- âœ… å®¢æˆ·æœ¬åœ°éƒ¨ç½²

### ç¼ºç‚¹
- âŒ å®¢æˆ·å¯ä»¥ä¿®æ”¹Tokenæ•°å€¼ï¼ˆä¸å®‰å…¨ï¼‰
- âŒ æ— æ³•è¿œç¨‹æ§åˆ¶
- âŒ ä»éœ€äº¤ä»˜APIå¯†é’¥

**ä¸æ¨èä½¿ç”¨**

---

## æ¨èå†³ç­–æ ‘

```
å¼€å§‹
â”‚
â”œâ”€ æ˜¯å¦ä»‹æ„å®¢æˆ·è·å–APIå¯†é’¥ï¼ˆå³ä½¿çŸ­æœŸï¼‰ï¼Ÿ
â”‚  â”‚
â”‚  â”œâ”€ æ˜¯ â†’ æ–¹æ¡ˆ1: ä»£ç†æœåŠ¡å™¨ â­â­â­â­â­
â”‚  â”‚       æˆ–
â”‚  â”‚       æ–¹æ¡ˆ4: çº¯SaaS
â”‚  â”‚
â”‚  â””â”€ å¦ â†’ å®¢æˆ·æ˜¯å¦éœ€è¦å®Œå…¨ç¦»çº¿è¿è¡Œï¼Ÿ
â”‚           â”‚
â”‚           â”œâ”€ æ˜¯ â†’ æ–¹æ¡ˆ2: RAMå­è´¦å·
â”‚           â”‚       æˆ–
â”‚           â”‚       æ–¹æ¡ˆ3: LicenseæœåŠ¡å™¨
â”‚           â”‚
â”‚           â””â”€ å¦ â†’ æ–¹æ¡ˆ1: ä»£ç†æœåŠ¡å™¨ â­
â”‚
â””â”€ é¢„ç®—å’ŒæŠ€æœ¯èƒ½åŠ›ï¼Ÿ
   â”‚
   â”œâ”€ é¢„ç®—å……è¶³ + æœ‰è¿ç»´å›¢é˜Ÿ â†’ æ–¹æ¡ˆ4: SaaS
   â”œâ”€ ä¸­ç­‰é¢„ç®— + åŸºç¡€è¿ç»´ â†’ æ–¹æ¡ˆ1: ä»£ç†æœåŠ¡å™¨ â­
   â””â”€ ä½é¢„ç®— + å®¢æˆ·å°‘ â†’ æ–¹æ¡ˆ2: RAMå­è´¦å·
```

---

## æœ€ç»ˆæ¨è

### ğŸ† é¦–é€‰: æ–¹æ¡ˆ1 - ä»£ç†æœåŠ¡å™¨æ¶æ„

**ç†ç”±:**
1. âœ… APIå¯†é’¥100%å®‰å…¨éš”ç¦»
2. âœ… ç²¾ç¡®çš„æˆæœ¬å’Œé…é¢æ§åˆ¶
3. âœ… è‰¯å¥½çš„å®¢æˆ·ä½“éªŒï¼ˆæœ¬åœ°éƒ¨ç½²æ„Ÿï¼‰
4. âœ… çµæ´»çš„å•†ä¸šæ¨¡å¼
5. âœ… å¯æ‰©å±•æ€§å¼º

**å®æ–½æˆæœ¬:**
- å¼€å‘æ—¶é—´: 2-3å‘¨
- æœåŠ¡å™¨æˆæœ¬: $15-20/æœˆ
- ç»´æŠ¤æˆæœ¬: ä½ï¼ˆè‡ªåŠ¨åŒ–ï¼‰

### å¤‡é€‰: æ–¹æ¡ˆ4 - çº¯SaaS

**é€‚ç”¨äº:**
- é¢„ç®—å……è¶³
- å®¢æˆ·å¯æ¥å—åœ¨çº¿æœåŠ¡
- å¸Œæœ›æœ€å¤§åŒ–å®‰å…¨æ€§

---

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

å¦‚æœé€‰æ‹©**æ–¹æ¡ˆ1**ï¼Œæˆ‘å¯ä»¥å¸®æ‚¨:
1. å®ç°Licenseç®¡ç†ç³»ç»Ÿ
2. å¼€å‘ä¸­å¿ƒä»£ç†æœåŠ¡å™¨
3. é‡æ„å®¢æˆ·ç«¯ä¸ºè½»é‡ä»£ç†æ¨¡å¼
4. å‡†å¤‡Dockeräº¤ä»˜åŒ…
5. ç¼–å†™å®¢æˆ·ä½¿ç”¨æ–‡æ¡£

æ˜¯å¦éœ€è¦æˆ‘å¼€å§‹å®æ–½æ–¹æ¡ˆ1çš„ä»£ç ï¼Ÿ
